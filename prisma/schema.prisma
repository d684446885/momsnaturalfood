generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["driverAdapters"]
}

datasource db {
  provider = "postgresql"
}

model User {
  id            String    @id @default(cuid())
  email         String    @unique
  emailVerified Boolean   @default(false)
  image         String?
  name          String?
  role          Role      @default(CUSTOMER)
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  password      String?
  cart          Cart?
  orders        Order[]
  accounts      Account[]
  sessions      Session[]

  @@map("user")
}

model Session {
  id        String   @id
  expiresAt DateTime
  token     String   @unique
  createdAt DateTime
  updatedAt DateTime
  ipAddress String?
  userAgent String?
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("session")
}

model Account {
  id                    String    @id
  accountId             String
  providerId            String
  userId                String
  accessToken           String?
  refreshToken          String?
  idToken               String?
  accessTokenExpiresAt  DateTime?
  refreshTokenExpiresAt DateTime?
  scope                 String?
  password              String?
  createdAt             DateTime
  updatedAt             DateTime
  user                  User      @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("account")
}

model Verification {
  id         String    @id
  identifier String
  value      String
  expiresAt  DateTime
  createdAt  DateTime?
  updatedAt  DateTime?

  @@map("verification")
}

model Product {
  id             String      @id @default(cuid())
  name           String
  description    String
  price          Decimal
  salePrice      Decimal?
  weight         String?
  stock          Int
  images         String[]
  categoryId     String
  highlights     String[]
  ingredients    String[]
  nutritionFacts Json?
  perfectWith    String[]
  orderCount     Int         @default(0)
  createdAt      DateTime    @default(now())
  updatedAt      DateTime    @updatedAt
  cartItems      CartItem[]
  orderItems     OrderItem[]
  category       Category    @relation(fields: [categoryId], references: [id])
}

model Category {
  id        String    @id @default(cuid())
  name      String    @unique
  slug      String    @unique
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  products  Product[]
}

model Order {
  id           String      @id @default(cuid())
  userId       String
  total        Decimal
  status       OrderStatus @default(PENDING)
  courierName  String?
  trackingLink String?
  createdAt    DateTime    @default(now())
  updatedAt    DateTime    @updatedAt
  user         User        @relation(fields: [userId], references: [id])
  items        OrderItem[]
}

model OrderItem {
  id        String  @id @default(cuid())
  orderId   String
  productId String
  quantity  Int
  price     Decimal
  order     Order   @relation(fields: [orderId], references: [id])
  product   Product @relation(fields: [productId], references: [id])
}

model Cart {
  id        String     @id @default(cuid())
  userId    String     @unique
  createdAt DateTime   @default(now())
  updatedAt DateTime   @updatedAt
  user      User       @relation(fields: [userId], references: [id])
  items     CartItem[]
}

model CartItem {
  id        String  @id @default(cuid())
  cartId    String
  productId String
  quantity  Int
  cart      Cart    @relation(fields: [cartId], references: [id])
  product   Product @relation(fields: [productId], references: [id])
}

model Settings {
  id              String   @id @default("global")
  primaryColor    String   @default("#8B5E3C")
  secondaryColor  String   @default("#1E3A34")
  backgroundColor String   @default("#FAF9F6")
  accentColor     String   @default("#D4AF37")
  navbarColor     String   @default("#1E3A34")
  footerColor     String   @default("#1E3A34")
  sidebarColor    String   @default("#FAF9F6")
  textColor       String   @default("#1E3A34")
  buttonColor     String   @default("#8B5E3C")
  buttonTextColor String   @default("#FAF9F6")
  buttonHoverColor String  @default("#7d6036")
  buttonHoverTextColor String @default("#FAF9F6")
  
  // Business Settings
  businessName    String?
  logoUrl         String?
  businessEmail   String?
  businessPhone   String?
  businessAddress String?
  // File Upload Settings
  uploadProvider  String   @default("r2") // "r2", "local", or "vercel"
  
  // Cloudflare R2 Storage Settings
  r2AccountId     String?
  r2AccessKeyId   String?
  r2SecretAccessKey String?
  r2BucketName    String?
  r2PublicUrl     String?
  
  // Vercel Blob Settings
  vercelBlobToken          String?
  
  // NextAuth / Google OAuth Settings
  googleClientId     String?
  googleClientSecret String?
  authSecret          String?
  
  // Localization Settings
  defaultLanguage String   @default("en")
  
  updatedAt       DateTime @updatedAt
}

model AboutPage {
  id                    String   @id @default("global")
  heroTitle             String
  heroDescription       String
  heroBackgroundUrl     String?
  heroBackgroundType    String   @default("image")
  storyTitle            String
  storySubtitle         String
  storyContent          String
  storyImageUrl         String?
  storyImageType        String   @default("image")
  missionTitle          String
  missionContent        String
  missionImageUrl       String?
  missionImageType      String   @default("image")
  qualityTitle          String   @default("Quality You Can Trust")
  qualityDescription    String   @default("Pure. Natural. Authentic.")
  qualityBackgroundUrl  String?
  qualityBackgroundType String   @default("image")
  values                Json?
  updatedAt             DateTime @updatedAt
}

model HomePage {
  id                   String   @id @default("global")
  heroTitle            String
  heroTitleAccent      String?
  heroSubtitle         String?
  heroDescription      String
  heroPrimaryCtaText   String   @default("Shop Now")
  heroPrimaryCtaLink   String   @default("/products")
  heroSecondaryCtaText String   @default("View Collections")
  heroSecondaryCtaLink String   @default("/categories")
  heroBackgroundUrl    String?
  heroBackgroundType   String   @default("image")
  features             Json?
  categoriesTitle      String   @default("Shop by Category")
  categoriesSubtitle   String   @default("Explore our diverse range")
  featuredTitle        String   @default("Seasonal Specials")
  featuredSubtitle     String   @default("Fresh from the earth to your table")
  ctaTitle             String   @default("Get 20% Off Your First Order")
  ctaSubtitle          String   @default("Sign up for our newsletter...")
  ctaMediaUrl          String?
  ctaMediaType         String   @default("image")
  whyTitle             String   @default("Why Mom's Naturals Foods?")
  whyDescription       String   @default("We create MOM'S Naturals Foods for people who want both health and taste — no compromises.\n\nOur products are free from chemical additives, coloring, flavoring, and sugar — only pure, natural ingredients.")
  whyLearnMoreText     String   @default("Learn More")
  whyLearnMoreLink     String   @default("/about")
  whyBackgroundUrl     String?
  whyCards             Json?
  promoCards           Json?
  promoSectionBgUrl    String?
  updatedAt            DateTime @updatedAt
}

model ContactPage {
  id                 String   @id @default("global")
  heroTitle          String
  heroSubtitle       String?
  heroDescription    String
  heroBackgroundUrl  String?
  heroBackgroundType String   @default("image")
  email              String
  phone              String
  address            String
  hours              String?
  socialLinks        Json?
  formTitle          String?
  formSuccessMessage String?
  mapEmbedUrl        String?
  updatedAt          DateTime @updatedAt
}

model Deal {
  id           String    @id @default(cuid())
  title        String
  description  String
  regularPrice Decimal?
  salePrice    Decimal?
  discount     Int?
  images       String[]
  productIds   String[]
  startDate    DateTime  @default(now())
  endDate      DateTime?
  isActive     Boolean   @default(true)
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt
}

model Coupon {
  id          String      @id @default(cuid())
  code        String      @unique
  type        CouponType
  value       Decimal
  minPurchase Decimal?    @default(0)
  expiryDate  DateTime?
  usageLimit  Int?
  usageCount  Int         @default(0)
  scope       CouponScope @default(GLOBAL)
  productIds  String[]
  categoryIds String[]
  dealIds     String[]
  isActive    Boolean     @default(true)
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt
}

model PaymentGateway {
  id          String   @id @default(cuid())
  provider    String   @unique
  enabled     Boolean  @default(false)
  mode        String   @default("test")
  credentials Json     @default("{}")
  settings    Json?
  updatedAt   DateTime @updatedAt
  createdAt   DateTime @default(now())
}

model ContactMessage {
  id         String    @id @default(cuid())
  name       String
  email      String
  phone      String?
  subject    String
  message    String
  adminReply String?
  repliedAt  DateTime?
  ipAddress  String?
  location   String?
  isRead     Boolean   @default(false)
  createdAt  DateTime  @default(now())
}

enum CouponType {
  PERCENTAGE
  FIXED
}

enum CouponScope {
  GLOBAL
  PRODUCT
  CATEGORY
  DEAL
}

enum Role {
  ADMIN
  CUSTOMER
}

enum OrderStatus {
  PENDING
  PROCESSING
  SHIPPED
  DELIVERED
  CANCELLED
}

model FaqCategory {
  id        String   @id @default(cuid())
  name      String   @unique
  slug      String   @unique
  order     Int      @default(0)
  faqs      Faq[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("faq_category")
}

model Faq {
  id         String      @id @default(cuid())
  question   String
  answer     String
  order      Int         @default(0)
  categoryId String
  category   FaqCategory @relation(fields: [categoryId], references: [id], onDelete: Cascade)
  createdAt  DateTime    @default(now())
  updatedAt  DateTime    @updatedAt

  @@map("faq")
}

model LegalPage {
  id        String   @id @default(cuid())
  title     String
  slug      String   @unique
  content   String   @db.Text
  updatedAt DateTime @updatedAt
  createdAt DateTime @default(now())

  @@map("legal_page")
}

